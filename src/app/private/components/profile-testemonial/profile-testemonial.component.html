<div class="container">
    <div class="title mt-5 text-center"> Profile Testemonial</div>
    <div class="subtitle mt-3 text-center">
        Here you can leave an app review
    </div>
    <div class="subtitleInfo mt-5 mx-auto"> {{label}}</div>
    <form action="" class="mt-3 mb-5 passwordForm" [formGroup]="testemonialForm">
        <div class="form-group mb-4">
            <label for="reviewLabe" class="mb-1 ms-1">Title</label>
            <input type="text" class="form-control" cols="15" rows="3" wrap="hard" maxlength="50"
                formControlName="titleTs">
            <small id="smallError" class="smallError form-text ms-1"
                *ngIf="testemonialForm.get('titleTs')?.hasError('required') && testemonialForm.get('titleTs')?.dirty">*
                Can't be empty.</small>
            <small id="smallError" class="smallError form-text ms-1"
                *ngIf="testemonialForm.get('titleTs')?.hasError('minlength') || testemonialForm.get('titleTs')?.hasError('maxlength')">*
                Minimum lenght is 2 and maximum 30.</small>
        </div>
        <div class="form-group mb-4">
            <label for="reviewLabe" class="mb-1 ms-1">Revew</label>
            <textarea class="form-control" cols="15" rows="3" wrap="hard" maxlength="150"
                formControlName="testemonialTs"> </textarea>
            <small id="smallError" class="smallError form-text ms-1"
                *ngIf="testemonialForm.get('testemonialTs')?.hasError('required') && testemonialForm.get('testemonialTs')?.dirty">*
                Can't be empty.</small>
            <small id="smallError" class="smallError form-text ms-1"
                *ngIf="testemonialForm.get('testemonialTs')?.hasError('minlength') || testemonialForm.get('testemonialTs')?.hasError('maxlength')">*
                Minimum lenght is 2 and maximum 150.</small>
        </div>
        <div class="form-check form-check-inline mb-4 ms-1">
            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="1"
                formControlName="anonymousTs">
            <label class="form-check-label" for="inlineCheckbox1">Anonymous review</label>
        </div>
        <button class="btn btn-secondary w-100" *ngIf="!existingTestemonial"
            [disabled]="!testemonialForm.valid || (testemonialForm.valid && !testemonialForm.touched)"
            (click)="saveChanges()">Add Testemonial</button>
        <button class="btn btn-secondary w-100" *ngIf="existingTestemonial"
            [disabled]="!testemonialForm.valid || (!testemonialForm.dirty && !testemonialForm.touched)"
            (click)="editTestemonial()">Edit Testemonial</button>

        <div *ngIf="successMessage!=''" class="mt-2 ms-2"><small class="helperTextt"> {{successMessage}}</small></div>
        <div *ngIf="error==''" class="mt-2 ms-2"><small class="error">{{error}}</small></div>

    </form>

    <ng-container *ngIf="existingTestemonial">
        <div class="rowReview mb-5">
            <div class="title mt-4 mb-5 text-center ">
                Your review
            </div>
            <div class="delete text-end me-2 mb-1" (click)="delete(testemonial.user.id)">
                <small>X Delete review</small>
            </div>
            <div class=" review card p-4">
                <div class="reviewTitle mt-1">
                    <span>{{testemonial.user.title}}</span>
                </div>
                <div class="reviewText subtitle mt-3">
                    {{testemonial.user.text}}
                </div>
            </div>
        </div>
    </ng-container>
</div>